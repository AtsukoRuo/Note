# 环境配置

[TOC]

这笔记估计一年都看不到一次 😅

环境： `CentOS 8.2`

安装`mysql` & ` java`





## 远程连接

~~~shell
$ scp 本地文件 -r root@124.70.201.56:~/tomcat
$ ssh root@117.88.47.10
~~~



可以在Windows下访问WSL2的文件系统

~~~
\\wsl.localhost\Ubuntu\home\myokuuu
~~~

![image-20240115154105747](assets/image-20240115154105747.png)



## 网络 进程

`lsof -i:端口号`，查询绑定该端口号的进程



默认情况下，WSL 使用基于 NAT（网络地址转换）的网络体系结构。 使用基于 NAT 的网络体系结构时，请牢记以下注意事项：

1. 端口号都是共用的

2. 如果要在 Linux 分发版中构建网络应用，可以使用 `localhost` 从 Windows 应用访问Linux

3. 如果要从 Linux 分发版访问 Windows 上运行的网络应用，则需要使用主机的 IP 地址

   下图显示了一个示例，该示例说明如何通过 curl 连接到在 Windows 中运行的 Node.js 服务器。

   ![wsl2-network-l2w](../../框架 & 中间件/Redis/assets/wsl2-network-l2w.png)

## 环境变量

配置环境变量

~~~shell
vim /etc/profile
source /etc/profile
~~~

~~~shell
# /etc/profile
JAVA_HOME="/usr/lib/jvm/java-17-openjdk-17.0.1.0.12-2.el8_5.x86_64"
CLASSPATH="$JAVA_HOME/lib/tools.jar"
PATH="$JAVA_HOME/bin:$PATH"
export JAVA_HOME CLASSPATH PATH
~~~



## Java

~~~bash
yum install java-17
~~~



## Minecraft

> 注意：推荐使用Java11/8作为1.16.5的运行环境。而1.16.5以后的版本推荐使用java 17。



- `java -jar forge-XXX-installer.jar --installServer`

- 在eula.txt文件设置`eula=true`
- `java -Xms1024M -Xmx3072M -jar forge-XXX.jar nogui`
- 在`server.properties`中设置`online-mode=false`，允许盗版玩家加入

- 将mod直接放入mods文件夹中即可

推荐使用screen命令挂后台



## Proxy

https://github.com/wanhebin/clash-for-linux

## Python3

~~~shell
yum update
yum install openssl-devel bzip2-devel libffi-devel
yum groupinstall "Development Tools"
wget https://www.python.org/ftp/python/3.10.2/Python-3.10.2.tgz
tar -xzf Python-3.10.2.tgz
cd Python-3.10.2
./configure --enable-optimizations
make altinstall
~~~

## Tomcat

一定要确保本地的运行环境与服务器的运行环境是相同的。你绝对体会不到用6小时debug出因tomcat版本不同而导致服务器异常所带来的绝望感。`k8s`是一个好东西 :) 。



从官网上下载tar.gz包，推荐使用scp协议传输到服务器上。



在 Linux 中使用 systemctl 启动 Tomcat 可以按照以下步骤进行：

1. 创建服务文件

	在 `/etc/systemd/system/` 目录下创建一个服务文件，例如 `tomcat.service`，并编辑该文件，添加以下内容：

	~~~bash
	[Unit]
	Description=Tomcat Web Application Container
	After=syslog.target network.target
	
	[Service]
	Type=forking
	Environment=JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.18.0.9-0.3.ea.el8.x86_64
	Environment=CATALINA_HOME=/root/apache-tomcat-9.0.70
	ExecStart=/root/apache-tomcat-9.0.70/bin/startup.sh
	ExecStop=/root/apache-tomcat-9.0.70/shutdown.sh
	Restart=on-failure
	User=root
	
	[Install]
	WantedBy=multi-user.target
	~~~
	
	在上述服务文件中，`Description` 表示服务的描述，`After` 表示服务启动的依赖项。`Type` 表示服务的类型，可以是 `simple`、`forking` 或者 `oneshot`。在此示例中，使用 `forking` 类型。`Environment` 表示服务的环境变量，需要根据实际情况进行修改。`ExecStart` 表示服务启动命令，`ExecStop` 表示服务停止命令。`Restart` 表示服务异常退出时是否自动重启，`User` 和 `Group` 表示服务运行的用户和用户组。`WantedBy` 表示服务的启动级别。
	
2. 加载服务文件

	使用以下命令加载服务文件：

	~~~bash
	sudo systemctl daemon-reload
	~~~

	

3. 启动 Tomcat 服务

	使用以下命令启动 Tomcat 服务：

	~~~bash
	sudo systemctl start tomcat
	~~~

	

4. 设置 Tomcat 服务自启动

	使用以下命令设置 Tomcat 服务自启动：

	~~~bash
	sudo systemctl enable tomcat
	~~~

	

## MySQL

在 CentOS 下安装 MySQL 可以按照以下步骤进行：

1. 更新系统软件包

	 使用以下命令更新系统软件包信息：

	~~~bash
	sudo yum update
	~~~

	

2. 安装 MySQL

	  使用以下命令安装 MySQL：

	~~~shell
	sudo yum install mysql-server
	~~~

	

3. 启动 MySQL

	使用以下命令启动 MySQL：

	~~~bash
	sudo systemctl start mysqld
	~~~

	

4. 设置 MySQL 自动启动

	使用以下命令将 MySQL 添加到系统服务列表中：

	~~~bash
	sudo systemctl enable mysqld
	~~~

	

5. 设置 MySQL root 用户密码

	使用以下命令设置 MySQL root 用户的密码：

	~~~bash
	sudo mysql_secure_installation
	~~~

	

6. 验证 MySQL

	使用以下命令登录 MySQL：

	~~~bash
	sudo mysql -u root -p
	~~~

	

~~~bash
service mysqld restart
mysql -u root -p 
#直接回车进入 无密码
ALTER user 'root'@'localhost' IDENTIFIED BY '******';		#设置密码
#配置root用户远程访问能力，兼容所有的IP地址和分发所有的权限
create user 'root'@'%' identified with mysql_native_password by '********';
grant all privileges on *.* to 'root'@'%';
flush privileges;
# 记得开放3306端口哦
~~~



## Flutter

环境变量的配置

更换下载源：FLUTTER_STORAGE_BASE_URL：https://storage.flutter-io.cn、PUB_HOSTED_URL=https://pub.flutter-io.cn





X HTTP host https://[maven](https://links.jianshu.com/go?to=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3Dmaven%26spm%3D1001.2101.3001.7020).google.com/ is not reachable解决

1、找到flutter sdk的文件目录，打开flutter\packages\flutter_tools\lib\src\http_host_validator.dart

2、将[https://maven.google.com/](https://links.jianshu.com/go?to=https%3A%2F%2Fmaven.google.com%2F) 修改为[https://dl.google.com/dl/android/maven2/](https://links.jianshu.com/go?to=https%3A%2F%2Fdl.google.com%2Fdl%2Fandroid%2Fmaven2%2F)

3、关闭cmd命令窗口，重新打开cmd窗口

4、去到flutter\bin目录，删除cache文件夹

5、在cmd命令窗口重新运行flutter doctor，它会重新下载flutter sdk等（时间较长）。



## Linux

Linux后台运行命令有两种方式：

1. cmd & ： 后台运行，关掉终端会停止运行
2. nohup cmd & ： 后台运行，关掉终端不会停止运行

### 会话

当我们打开一个新的终端时，总会创建一个新的 shell Session。

![img](assets/952033-20200103182042686-2100862807.png)

Session 中的每个进程组被称为一个 job，有一个 job 会成为 session 的**前台 job(foreground)**，其它的 job 则是**后台 job(background)**。每个 session 连接一个控制终端（control terminal），控制终端中的输入被发送给前台 job，从前台 job 产生的输出也被发送到控制终端上。

当关闭终端时，内核中会将 SIGHUP 信号发送到整个 session。默认情况下，这会杀死 session 中的所有进程。但是我们可以通过nohup 命令避免这一点。



**Tmux 就是会话与终端窗口的"解绑"工具，将它们彻底分离。**

- 分屏（split），支持窗口任意的垂直和水平拆分。
- 保护现场（attach）：即使退出终端，tmux仍会为你保持住会话
- 会话共享



输入`tmux`命令，创建一个会话。默认情况下第一个启动的 Tmux 窗口，编号是`0`，第二个窗口的编号是`1`，以此类推。

~~~shell
tmux
~~~

下面命令**新建一个指定名称的会话**。

~~~shell
tmux new -s <session-name>
~~~



按下`Ctrl+b d`或者显式输入`exit`命令，就可以**退出 Tmux 窗口**，但会话中的进程仍然在后台运行。

`tmux ls`命令可以**查看当前所有的 Tmux 会话**。



`tmux attach`命令用于**重新接入某个已存在的会话**。

~~~shell
# 使用会话编号
$ tmux attach -t 0

# 使用会话名称
$ tmux attach -t <session-name>
~~~

`tmux kill-session`命令用于**杀死某个会话**。

~~~shell
# 使用会话编号
$ tmux kill-session -t 0

# 使用会话名称
$ tmux kill-session -t <session-name>
~~~

`tmux switch`命令用于**切换会话**。

~~~shell
# 使用会话编号
$ tmux switch -t 0

# 使用会话名称
$ tmux switch -t <session-name>
~~~

`tmux rename-session`命令用于**重命名会话**。

~~~shell
$ tmux rename-session -t 0 <new-name>
~~~



### 终端分屏

> Tmux快捷键都必须键入在`ctrl + b`后才能使用。



Tmux 可以将窗口分成多个窗格（pane）.

~~~shell
# 划分上下两个窗格
$ tmux split-window

# 划分左右两个窗格
$ tmux split-window -h
~~~

`tmux select-pane`命令用来移动光标位置。

~~~shell
# 光标切换到上方窗格
$ tmux select-pane -U

# 光标切换到下方窗格
$ tmux select-pane -D

# 光标切换到左边窗格
$ tmux select-pane -L

# 光标切换到右边窗格
$ tmux select-pane -R
~~~

- `Ctrl+b %`：划分左右两个窗格。
- `Ctrl+b "`：划分上下两个窗格。
- `Ctrl+b <arrow key>`：光标切换到其他窗格。`<arrow key>`是指向要切换到的窗格的方向键，比如切换到下方窗格，就按方向键`↓`。 
- 按住 Ctrl + b，再不断按方向键可以调整大小
- `Ctrl+b {`：当前窗格与上一个窗格交换位置。
- `Ctrl+b }`：当前窗格与下一个窗格交换位置。
- `Ctrl+b Ctrl+o`：所有窗格向前移动一个位置，第一个窗格变成最后一个窗格。
- `Ctrl+b Alt+o`：所有窗格向后移动一个位置，最后一个窗格变成第一个窗格。
- `Ctrl+b x`：关闭当前窗格。
- `Ctrl+b !`：将当前窗格拆分为一个独立窗口。
- `Ctrl+b z`：当前窗格全屏显示，再使用一次会变回原来大小。
- `Ctrl+b Ctrl+<arrow key>`：按箭头方向调整窗格大小。
- `Ctrl+b q`：显示窗格编号。







