# 环境配置

[TOC]

这笔记估计一年都看不到一次 😅

环境： `CentOS 8.2`

安装`mysql` & ` java`

## Java

~~~bash
yum install java-17
~~~

## Minecraft

> 注意：推荐使用Java11/8作为1.16.5的运行环境。而1.16.5以后的版本推荐使用java 17。



- `java -jar forge-XXX-installer.jar --installServer`

- 在eula.txt文件设置`eula=true`
- `java -Xms1024M -Xmx3072M -jar forge-XXX.jar nogui`
- 在`server.properties`中设置`online-mode=false`，允许盗版玩家加入

- 将mod直接放入mods文件夹中即可

推荐使用screen命令挂后台

## Docker 部署 Kafka

~~~shell
services:
  zookeeper:
    image: 'bitnami/zookeeper:latest'
    ports:
      - '2181:2181'
    environment:
      - ALLOW_ANONYMOUS_LOGIN=yes
  kafka:
    image: 'bitnami/kafka:latest'
    ports:
      - '9092:9092'
    environment:
      - KAFKA_BROKER_ID=1
      - KAFKA_CFG_LISTENERS=PLAINTEXT://:9092
      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://127.0.0.1:9092
      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181
      - ALLOW_PLAINTEXT_LISTENER=yes
    depends_on:
      - zookeeper
~~~

~~~shell
$ docker-compose -f docker-compose1.yml up -d
~~~

~~~shell
$ docker exec -it kafka sh
~~~



## Docker

https://zhuanlan.zhihu.com/p/616276218

## Proxy

https://github.com/wanhebin/clash-for-linux

## Python3

~~~shell
yum update
yum install openssl-devel bzip2-devel libffi-devel
yum groupinstall "Development Tools"
wget https://www.python.org/ftp/python/3.10.2/Python-3.10.2.tgz
tar -xzf Python-3.10.2.tgz
cd Python-3.10.2
./configure --enable-optimizations
make altinstall
~~~

## Tomcat

一定要确保本地的运行环境与服务器的运行环境是相同的。你绝对体会不到用6小时debug出因tomcat版本不同而导致服务器异常所带来的绝望感。`k8s`是一个好东西 :) 。



从官网上下载tar.gz包，推荐使用scp协议传输到服务器上。



在 Linux 中使用 systemctl 启动 Tomcat 可以按照以下步骤进行：

1. 创建服务文件

	在 `/etc/systemd/system/` 目录下创建一个服务文件，例如 `tomcat.service`，并编辑该文件，添加以下内容：
	
	~~~bash
	[Unit]
	Description=Tomcat Web Application Container
	After=syslog.target network.target
	
	[Service]
	Type=forking
	Environment=JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.18.0.9-0.3.ea.el8.x86_64
	Environment=CATALINA_HOME=/root/apache-tomcat-9.0.70
	ExecStart=/root/apache-tomcat-9.0.70/bin/startup.sh
	ExecStop=/root/apache-tomcat-9.0.70/shutdown.sh
	Restart=on-failure
	User=root
	
	[Install]
	WantedBy=multi-user.target
	~~~
	
	在上述服务文件中，`Description` 表示服务的描述，`After` 表示服务启动的依赖项。`Type` 表示服务的类型，可以是 `simple`、`forking` 或者 `oneshot`。在此示例中，使用 `forking` 类型。`Environment` 表示服务的环境变量，需要根据实际情况进行修改。`ExecStart` 表示服务启动命令，`ExecStop` 表示服务停止命令。`Restart` 表示服务异常退出时是否自动重启，`User` 和 `Group` 表示服务运行的用户和用户组。`WantedBy` 表示服务的启动级别。

2. 加载服务文件

	使用以下命令加载服务文件：
	
	~~~bash
	sudo systemctl daemon-reload
	~~~


​	

3. 启动 Tomcat 服务

	使用以下命令启动 Tomcat 服务：
	
	~~~bash
	sudo systemctl start tomcat
	~~~


​	

4. 设置 Tomcat 服务自启动

	使用以下命令设置 Tomcat 服务自启动：
	
	~~~bash
	sudo systemctl enable tomcat
	~~~


​	

## MySQL

在 CentOS 下安装 MySQL 可以按照以下步骤进行：

1. 更新系统软件包

	 使用以下命令更新系统软件包信息：
	
	~~~bash
	sudo yum update
	~~~

2. 安装 MySQL

	  使用以下命令安装 MySQL：
	
	~~~shell
	sudo yum install mysql-server
	~~~

3. 启动 MySQL

	使用以下命令启动 MySQL：
	
	~~~bash
	sudo systemctl start mysqld
	~~~

4. 设置 MySQL 自动启动

	使用以下命令将 MySQL 添加到系统服务列表中：
	
	~~~bash
	sudo systemctl enable mysqld
	~~~

5. 设置 MySQL root 用户密码

	使用以下命令设置 MySQL root 用户的密码：
	
	~~~bash
	sudo mysql_secure_installation
	~~~

6. 验证 MySQL

	使用以下命令登录 MySQL：
	
	~~~bash
	sudo mysql -u root -p
	~~~


​	

~~~bash
service mysqld restart
mysql -u root -p 
#直接回车进入 无密码
ALTER user 'root'@'localhost' IDENTIFIED BY '******';		#设置密码
#配置root用户远程访问能力，兼容所有的IP地址和分发所有的权限
create user 'root'@'%' identified with mysql_native_password by '********';
grant all privileges on *.* to 'root'@'%';
flush privileges;
# 记得开放3306端口哦
~~~











